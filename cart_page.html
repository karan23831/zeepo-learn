<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart_page</title>
    <link rel="stylesheet" href="./css/cart.css">
</head>
<body>
    <div id="header">
        <div id="udemy_logo">
            <a href="home_page.html" >
                <img src="./logo.png" alt="Udemy" href="home_page.html" style="height: 40px;">
            
            <!-- <img src="https://www.udemy.com/staticx/udemy/images/v7/logo-udemy.svg" alt="Udemy" href="home_page.html"  /> -->
            </a>
        </div>
        <div class="header_text" id="Categories_btn">
            Categories
        </div>
        <div id="search_box">
           <a href="course_1_page.html" >
               <img class="search-btn"  src="https://img.icons8.com/material-sharp/2x/search.png" />
           </a>
            <input  type="text" placeholder="Search for anything"  />
        </div>
        <div class="header_text">Business</div>
        <div class="header_text">Teach on Skill</div>
        <a href="cart_page.html"><button id="cart"><img src="https://cdn3.iconfinder.com/data/icons/shopping-cart-19/200/457-128.png" /></button></a>
        <!-- <button id="log_in" ><a  href="login_page.html" >Log In</a></button>
        <button id="sign_up"><a  href="signup_page.html">Sign Up </a></button>
        <button id="globe"><img src="https://cdn3.iconfinder.com/data/icons/media-1-3/32/Internet-Globe-Communication-128.png"/></button> -->
        <button id="globe"><img src="https://www.svgrepo.com/show/529291/user-rounded.svg"></button>

    </div>
    <div class="shoppingcart">
        <h1>Shopping Cart</h1>

    </div>
    <p id = "coursenum"></p>


    <div id="parent-cart">
        <div id="cart_items">
      
        </div>
        <div id="checkout">
            <div class= "total_name" >
                Total:  
            </div>
            <h1 id="total_prie">
            
            </h1>
            
                <a href="checkout.html">
                    <button id="checkout_btn">
                
                    Exchange
                </button>
                </a>
           
            <div id="promotions">Promotions</div>
            <div id ="applied"></div>
            <div id="not_applied"></div>
            <div id="coupon">
              
                <input id = "inp-coupon" type="text" placeholder= "Enter Coupon">
                <button id = "coupon-btn">Apply</button>
            </div>
    
        </div>



    </div>
   
   
   

    <div id="footer">
        <div class = "flex-bo">
            <!-- <div><h2>Top companies choose Udemy Business to build in-demand career skills.</h2></div>
            <div class = "flex-image">
                <img src="https://s.udemycdn.com/partner-logos/v4/apple-dark.svg" alt="">
                <img src="https://s.udemycdn.com/partner-logos/v4/box-dark.svg" alt="">
                <img src="https://s.udemycdn.com/partner-logos/v4/volkswagen-dark.svg" alt="">
                <img src="https://s.udemycdn.com/partner-logos/v4/netflix-dark.svg" alt="">
                <img src="https://s.udemycdn.com/partner-logos/v4/eventbrite-dark.svg" alt="">
             </div>
            </div> -->
            <hr>
             <div class="final-flex">
                <div class="footer-link">
                    <div><p>Business</p></div>
                    <div><p>Careers</p></div>
                    <div><p>Terms</p></div>
                    <div><p>Teach on Skill</p></div>
                    <div><p>Blog</p></div>
                    <div><p>Privacy policy</p></div>
                    <div><p>Get the App</p></div>
                    <div><p>Help and support</p></div>
                    <div><p>Sitemap</p></div>
                    <div><p>About us</p></div>
                    <div><p>Affiliate</p></div>
                    <div><p>Contact us</p></div>
                </div>
                <!-- <div class= "glob">
                    <button id="globe1"><img src="https://cdn0.iconfinder.com/data/icons/mobile-apps-settings-linear-white-with-black-backg/2048/439_-_Browser-256.png"/> 
                        <span>English</span>
    
                     </button>
                    <div class="clear"></div>
                </div> -->
            </div>
            
            <div class="logo-img">

                
                <!-- <img src="https://www.udemy.com/staticx/udemy/images/v7/logo-udemy-inverted.svg" alt=""> -->
                <div> © 2024 Zeepo, Inc</div>
                </div>
      



    </div>

</body>
</html>

<script>
    let cart_data = JSON.parse(localStorage.getItem("udemy_cart"))
    
// let cart_data = null
        var total = 0
        var count = 0
        var total_price = 0 ;
    if(cart_data == null){
       var div =  document.getElementById("cart_items")
       div.setAttribute("class", "cart_item")
       
       var img = document.createElement("img")
       img.src = "https://s.udemycdn.com/browse_components/flyout/empty-shopping-cart-v2.jpg"


       var para = document.createElement("p")
       para.textContent = "Your cart is empty. Keep shopping to find a course"

       var button = document.createElement("button")
       button.textContent = "Keep shopping"


       button.setAttribute("class", "buttons")
       var link = document.createElement("a")
       link.href = "home_page.html"
       link.append(button)
       

       div.append(img,para,link)
       var p_item = document.getElementById("coursenum")
       p_item.textContent = `${total} Courses in the cart`
    }
    else {
    
        cart_data.forEach(function(product){
            let parent =  document.getElementById("cart_items")
         parent.setAttribute("class", "cart_items")


          // below is row div 
            let row_div = document.createElement("div")

            row_div.setAttribute("class", "cart-div")


            let div1 = document.createElement("div")
            div1.setAttribute("class", "div1-style")

            let image = document.createElement("img")


            image.src = product.image

            let div2 = document.createElement("div")
            div2.setAttribute("class", "div2-style")

            let c_name = document.createElement("h3")

            c_name = product.name
           // c_name.setAttribute("style", "font-weight:500") not working full row box is hidden when i apply this property

            let brea = document.createElement("br")  

            let author = document.createElement("p")
            
            author.textContent = `By ${product.author}`
            //author.setAttribute("style", "font-weight:300")

            
            let bre = document.createElement("br")  


            let div3 = document.createElement("div")
            div3.setAttribute("class", "div3-style")


            let remov = document.createElement("button")
            remov.textContent = "Remove"
           // remove.setAttribute("id","save-later1")
            

            let later = document.createElement("button")
            later.textContent = "Save for later"
           // later.setAttribute("id","save-later2")
            
          

           
            let div4 = document.createElement("div")

            div4.setAttribute("class", "div4-style")

              let p_price = document.createElement("p")


            p_price = product.price
            
            div1.append(image)

            div2.append(c_name , author)

            div3.append(remov,later)


            div4.append(p_price)



            row_div.append(div1, div2,div3,div4)
           
            count++
            total = total + count

          // row div append to parent div
            parent.append(row_div)





            let str_price = ""
            for(var i = 0; i < product.price.length; i++){

                if(product.price[i] == "₹"){
                continue
             }  
             else {
                str_price = str_price + product.price[i]
             }

            }




            // var total_div = document.createElement("div")
            // total_div.setAttribute("class", "total-div")

          

            total_price = total_price + Number(str_price)
            console.log("total" + total_price)

               
                
           
            let final_price = document.getElementById("total_prie")
           // final_price.setAttribute("class", "total-div")
            final_price.textContent =   "₹"+total_price
             //.append(pura_total)
           
            // total_show.append(total_div)

            
           
           


            var p_item = document.getElementById("coursenum")
             p_item.textContent = `${count} Course in cart`


        })
       
       
         

            

        
       


    }


    function promo(){
        var inp = document.getElementById("inp-coupon").value
        var pri = document.getElementById("total_prie")
        var coupon_para = document.createElement("p")
        var  sucess = document.getElementById("applied")
        var not_sucess = document.getElementById("not_applied")
        if(inp == "SPECIAL26" || inp == "special26"){
            pri.textContent =  "₹"+ total_price  * 0.74
            coupon_para.textContent =   inp + " promo code is applied" 

            sucess.append(coupon_para)
            
        }else {
    coupon_para.textContent = "Invalid promo code";
            not_sucess.append(coupon_para)
        }
    }
    var btnc = document.getElementById("coupon-btn")
    btnc.addEventListener("click", promo)

</script>